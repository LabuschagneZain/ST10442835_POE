@model IEnumerable<ST10442835_CLDV6212_POE.Models.Order>
@{
    ViewData["Title"] = "Orders";
}

<style>
    body {
        background-color: #0d0d0d; /* dark black */
        color: #e0e0e0; /* soft white text */
    }

    h2 {
        color: #e0e0e0; /* white heading */
        font-weight: 700;
    }

    /* Buttons */
    .btn-outline-info {
        border-color: #5bc0de;
        color: #5bc0de;
    }

        .btn-outline-info:hover {
            background-color: #5bc0de;
            color: #0d0d0d;
        }

    /* Table */
    .table {
        background-color: #1a1a1a;
        border-radius: 8px;
        overflow: hidden;
    }

        .table thead {
            background-color: #222;
            color: #e0e0e0;
            text-transform: uppercase;
            font-weight: 600;
        }

    .table-hover tbody tr:hover {
        background-color: #2a2a2a;
    }

    /* Alerts */
    .alert-info {
        background-color: #1a1a1a;
        border: 1px solid #444;
        color: #e0e0e0;
    }

    /* Status Badges */
    .badge {
        font-size: 0.9rem;
        padding: 0.4em 0.6em;
        border-radius: 5px;
    }

    .bg-primary {
        background-color: #a0d8ff !important;
        color: #0d0d0d;
    }

    .bg-info {
        background-color: #5bc0de !important;
        color: #0d0d0d;
    }

    .bg-success {
        background-color: #28a745 !important;
        color: #fff;
    }

    .bg-danger {
        background-color: #888 !important;
        color: #0d0d0d;
    }

    .bg-secondary {
        background-color: #6c757d !important;
        color: #fff;
    }

    i.fas {
        color: #a0d8ff; /* subtle light blue icons */
    }

    /* Customer-specific styling */
    .customer-view {
        max-width: 1200px;
        margin: 0 auto;
    }
</style>

<div class="customer-view">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2><i class="fas fa-shopping-cart"></i> My Orders</h2>
        <!-- Removed "Add Order" button for customers -->
    </div>

    @if (Model.Any())
    {
        <div class="table-responsive shadow">
            <table class="table table-striped table-hover text-white">
                <thead>
                    <tr>
                        <th>Order ID</th>
                        <th>Product</th>
                        <th>Order Date</th>
                        <th>Quantity</th>
                        <th>Total Price</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var order in Model.OrderByDescending(o => o.OrderDate))
                    {
                        <tr>
                            <td><code>@order.OrderId.Substring(0, 8)...</code></td>
                            <td>@order.ProductName</td>
                            <td>@order.OrderDate.ToString("MMM dd, yyyy")</td>
                            <td>@order.Quantity</td>
                            <td>@order.TotalPrice.ToString("C")</td>
                            <td>
                                <span class="badge bg-@(GetStatusBadgeClass(order.Status))">
                                    @order.Status
                                </span>
                            </td>
                            <td>
                                <!-- Only View button for customers -->
                                <a asp-action="Details" asp-route-id="@order.RowKey" class="btn btn-sm btn-outline-info" title="View Details">
                                    <i class="fas fa-eye"></i> View
                                </a>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    }
    else
    {
        <div class="alert alert-info shadow">
            <i class="fas fa-info-circle"></i> You haven't placed any orders yet.
        </div>
    }
</div>

@{
    string GetStatusBadgeClass(string status) => status?.ToLower() switch
    {
        "submitted" => "primary",
        "processing" => "info",
        "completed" => "success",
        "cancelled" => "danger",
        _ => "secondary"
    };
}